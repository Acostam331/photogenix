(this["webpackJsonpproyecto-final"]=this["webpackJsonpproyecto-final"]||[]).push([[0],{13:function(e,t,n){e.exports={dCenter:"Feed_dCenter__w6RtN",userSection:"Feed_userSection__3H-pn",posts:"Feed_posts__1ok1R",postsWrapper:"Feed_postsWrapper__hPdwa",icons:"Feed_icons__1Dk8p",iconUser:"Feed_iconUser__3dINg",icon:"Feed_icon__22nLQ",alertCard:"Feed_alertCard__16xV-"}},14:function(e,t,n){e.exports={dCenter:"User_dCenter__1UyWw",returnSection:"User_returnSection__2fB8v",iconReturn:"User_iconReturn__vHXb8",userPage:"User_userPage__1zU8x",logOut:"User_logOut__3L4cj",logOutButton:"User_logOutButton__1N7Zb",ownPostsButton:"User_ownPostsButton__2DQnS"}},18:function(e,t,n){e.exports={dCenter:"MyPosts_dCenter__1r7j5",userSection:"MyPosts_userSection__1x73u",posts:"MyPosts_posts__29pTO",postsWrapper:"MyPosts_postsWrapper__3MwwI",icons:"MyPosts_icons__2fMys",iconUser:"MyPosts_iconUser__2Rx0L",alertCard:"MyPosts_alertCard__15aIX"}},38:function(e,t,n){},59:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){"use strict";n.r(t);var s=n(2),c=n.n(s),a=n(32),r=n.n(a),o=(n(38),n(3)),i=n.n(o),l=n(6),u=n(4),d=n(5),j=n(12),b=n(9),x=n.n(b),p="https://posts-pw2021.herokuapp.com/api/v1",m={};m.login=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s={},e.prev=1,e.next=4,x()({method:"POST",baseURL:p,url:"/auth/signin",headers:{"Content-Type":"application/json"},data:{username:t,password:n}});case 4:"OK"===(s=e.sent).statusText&&(s=s.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,console.log(s.data),e.abrupt("return",s);case 15:case"end":return e.stop()}}),e,null,[[1,8,11,15]])})));return function(t,n){return e.apply(this,arguments)}}(),m.verifyToken=function(){var e=Object(l.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={},e.prev=1,e.next=4,x()({method:"GET",baseURL:p,url:"/auth/whoami",headers:{Authorization:"Bearer ".concat(t)}});case 4:"OK"===(n=e.sent).statusText&&(n=n.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:return e.prev=11,e.abrupt("return",n);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t){return e.apply(this,arguments)}}();var f=m,h=n(1),O=c.a.createContext(),v="token",g=function(e){var t=Object(s.useState)(void 0),n=Object(u.a)(t,2),c=n[0],a=n[1],r=Object(s.useState)(void 0),o=Object(u.a)(r,2),d=o[0],b=o[1];Object(s.useEffect)((function(){var e=function(){var e=Object(l.a)(i.a.mark((function e(){var t,n,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=N())){e.next=8;break}return e.next=4,f.verifyToken(t);case 4:n=e.sent,s=n.username,c=n.role,s&&c&&(b({username:s,role:c}),x(t));case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[c]);var x=function(e){localStorage.setItem(v,e),a(e)},p=Object(s.useCallback)((function(e,t){var n=function(){var n=Object(l.a)(i.a.mark((function n(){var s,c,a;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return s=!1,n.prev=1,n.next=4,f.login(e,t);case 4:c=n.sent,(a=c.token)&&(x(a),s=!0),n.next=13;break;case 9:n.prev=9,n.t0=n.catch(1),console.error(n.t0),console.error("Error in login");case 13:return n.prev=13,n.abrupt("return",s);case 16:case"end":return n.stop()}}),n,null,[[1,9,13,16]])})));return function(){return n.apply(this,arguments)}}();return n()}),[]),m=Object(s.useCallback)((function(){b(void 0),x(void 0)}),[]),g=Object(s.useMemo)((function(){return{token:c,user:d,login:p,logout:m}}),[c,d,p,m]);return Object(h.jsx)(O.Provider,Object(j.a)({value:g},e))},w=function(){var e=c.a.useContext(O);if(!e)throw new Error("useUserContext() must be inside of UserProvider");return e},N=function(){return localStorage.getItem(v)};function y(){var e=w(),t=e.login,n=e.token,c=Object(s.useState)(""),a=Object(u.a)(c,2),r=a[0],o=a[1],j=Object(s.useState)(""),b=Object(u.a)(j,2),x=b[0],p=b[1],m=Object(s.useState)(!1),f=Object(u.a)(m,2),O=f[0],v=f[1],g=function(e,t){t(e.target.value)},N=function(){var e=Object(l.a)(i.a.mark((function e(n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.next=3,t(r,x);case 3:s=e.sent,v(!s),o(""),p("");case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return n?Object(h.jsx)(d.a,{replace:!0,to:"/redirect"}):Object(h.jsx)("div",{className:"flex justify-center items-center min-h-screen bg-indigo-900",children:Object(h.jsx)("main",{className:"square rounded-4xl",children:Object(h.jsxs)("form",{onSubmit:N,className:"flex flex-col gap-6 items-center justify-center",children:[Object(h.jsx)("h2",{className:"uppercase text-5xl lg:text-5xl font-extrabold text-gray-300 text-center pb-4",children:"Photogenix"}),O&&Object(h.jsx)("p",{className:"w-full rounded p-6 text-center text-white font-roboto bg-yellow-700 select-none hover:bg-yellow-800",children:"Por favor verifica tus credenciales."}),Object(h.jsx)("input",{className:"w-full text-gray-700 rounded-2xl focus:outline-none focus:ring py-2 px-4 bg-gray-300",type:"text",value:r,placeholder:"Enter your username",onChange:function(e){return g(e,o)}}),Object(h.jsx)("input",{className:"w-full text-gray-700 rounded-2xl focus:outline-none focus:ring py-2 px-4 bg-gray-300",type:"password",placeholder:"Enter your password",onChange:function(e){return g(e,p)},value:x}),Object(h.jsx)("button",{className:"rounded-2xl mt-6 w-1/4 bg-gray-800 py-2 px-4 text-white",children:"Iniciar sesi\xf3n"})]})})})}var k=n(8),_=n(14),C=n.n(_),T=n(33),S=function(){var e=Object(d.g)(),t=w(),n=t.logout,s=t.user,c=s.role,a=s.username;return Object(h.jsxs)("main",{className:"bg-indigo-900 h-screen",children:[Object(h.jsxs)("header",{className:C.a.dCenter,children:[Object(h.jsx)("h1",{className:"text-3xl lg:text-3xl font-extrabold text-gray-300 text-center pb-4 mt-8",children:"Perfil"}),Object(h.jsx)("div",{className:C.a.returnSection,children:Object(h.jsx)(k.b,{to:"/feed",children:Object(h.jsx)(T.a,{className:C.a.iconReturn})})})]}),Object(h.jsxs)("div",{className:"h-screen ".concat(C.a.userPage),children:[Object(h.jsx)("h2",{className:"text-4xl lg:text-4xl font-extrabold text-gray-300 text-center pb-4 mt-8",children:"Bienvenido!"}),Object(h.jsx)("h3",{children:a})]}),Object(h.jsxs)("div",{className:C.a.logOut,children:["admin"===c?Object(h.jsx)(k.b,{to:"/myposts",className:"rounded-lg mx-2 ".concat(C.a.ownPostsButton),children:"Mis posts"}):"",Object(h.jsx)("button",{type:"button",className:"rounded-lg mx-2 ".concat(C.a.logOutButton),onClick:function(){return n(),void e("/login")},children:"Cerrar sesi\xf3n"})]})]})},P=function(){var e=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("hola");case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"flex justify-center flex-col",children:[Object(h.jsx)("h1",{className:"font-thin text-2xl",children:"This is a test, you are reading Test.js file"}),Object(h.jsx)(k.b,{to:"/",className:"text-blue-700",children:"Switch test"}),Object(h.jsx)("button",{type:"button",onClick:function(){e()},children:"TEST"})]})},I=n.p+"static/media/error.1704b193.png",A=function(){return Object(h.jsxs)("div",{className:"flex flex-col justify-center items-center w-screen h-screen bg-white",children:[Object(h.jsx)("div",{className:"w-1/2 lg:w-1/2 flex justify-center items-center",children:Object(h.jsx)("img",{alt:"error-flork-img",className:"w-full lg:w-1/2",src:I})}),Object(h.jsx)("h1",{className:"uppercase text-2xl lg:text-5xl font-extrabold text-red-800 text-center p-4",children:"ERROR 404... Page not found"}),Object(h.jsx)(k.b,{to:"/",className:"rounded-lg mx-2 p-4 text-center text-white bg-blue-800 hover:bg-blue-600",children:"Regresar"})]})},E=n(17),L=n(7),U=n(13),R=n.n(U),M=function(e){var t=e.changeTab,n=void 0===t?function(){}:t,s=e.role,c=e.setIsNewPost;return Object(h.jsxs)("footer",{className:"bg-gray-800",children:[Object(h.jsx)("button",{onClick:function(){return n(1)},children:Object(h.jsx)(L.k,{className:R.a.icons})}),"user"===s?"":Object(h.jsx)("button",{onClick:function(){c(!0)},children:Object(h.jsx)(L.i,{className:R.a.icons})}),Object(h.jsx)("button",{onClick:function(){return n(2)},children:Object(h.jsx)(L.b,{className:R.a.icons})})]})},B=(n(59),function(e){var t=e._id,n=e.title,c=e.description,a=e.image,r=e.user,o=e.likes,i=e.active,l=e.comments,d=e.setComments,j=e.setEdit,b=e.localData,x=e.role,p=e.username,m=e.isMyPost,f=e.addNewLike,O=void 0===f?function(){}:f,v=e.addNewFav,g=void 0===v?function(){}:v,w=e.addStatus,N=void 0===w?function(){}:w,y=e.currentuser,k=Object(s.useState)(!1),_=Object(u.a)(k,2),C=_[0],T=_[1],S=Object(s.useState)(!1),P=Object(u.a)(S,2),I=P[0],A=P[1],E=l.filter((function(e){return void 0!==e.user}));Object(s.useEffect)((function(){o.forEach((function(e){e.username===y&&T(!0)}))}),[o,y]);return Object(h.jsxs)("div",{className:"square bg-gray-800 rounded-3xl",children:[t!==b.id?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"flex p-4",children:[Object(h.jsx)(L.j,{className:"user-icon mr-2"}),Object(h.jsx)("h3",{className:"text-white",children:r.username})]}),Object(h.jsx)("div",{className:"flex justify-center items-center w-11/12 h-72 sm:h-96 mx-auto",children:Object(h.jsx)("img",{src:a,className:"card-img",alt:n})}),Object(h.jsxs)("div",{className:"flex flex-col items-center p-4 pb-4",children:[Object(h.jsx)("p",{className:"text-white font-thin text-3xl w-b",children:n}),Object(h.jsxs)("h2",{className:"text-gray-300 w-b",children:[c.length>200?I?"".concat(c," "):"".concat(c.substring(0,100),"... "):c,c.length>200?Object(h.jsx)("button",{className:"text-blue-400",onClick:function(){return A(!I)},children:I?"leer menos":"leer m\xe1s"}):""]})]})]}):Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"flex p-4",children:[Object(h.jsx)(L.j,{className:"user-icon mr-2"}),Object(h.jsx)("h3",{className:"text-white",children:r.username})]}),Object(h.jsx)("div",{className:"flex justify-center items-center w-11/12 h-72 sm:h-96 mx-auto",children:Object(h.jsx)("img",{src:b.url,className:"card-img",alt:b.title})}),Object(h.jsxs)("div",{className:"flex flex-col items-center p-4 pb-4",children:[Object(h.jsx)("p",{className:"text-white font-thin text-3xl w-b",children:b.title}),Object(h.jsxs)("h2",{className:"text-gray-300 w-b",children:[b.desc.length>200?I?"".concat(b.desc," "):"".concat(b.desc.substring(0,100),"... "):b.desc,b.desc.length>200?Object(h.jsx)("button",{className:"text-blue-400",onClick:function(){return A(!I)},children:I?"leer menos":"leer m\xe1s"}):""]})]})]}),Object(h.jsxs)("div",{className:"flex justify-end px-4 pb-4",children:["admin"===x&&p===r.username||"admin"===x&&p===r.username&&m?Object(h.jsxs)(h.Fragment,{children:[Object(h.jsx)("div",{className:"flex",children:Object(h.jsx)("button",{onClick:function(){return j({isEdit:!0,postId:t,postTitle:n,postDesc:c,postImg:a})},children:Object(h.jsx)(L.h,{className:"card-icons edit-icon mx-2"})})}),Object(h.jsx)("div",{className:"flex",children:Object(h.jsx)("button",{onClick:function(){N(i)},children:Object(h.jsx)(L.a,{className:"card-icons block-icon mx-2 ".concat(i?"":"icon-filled")})})})]}):"",m?"":Object(h.jsxs)(h.Fragment,{children:[Object(h.jsxs)("div",{className:"flex",children:[o.length>0?Object(h.jsx)("p",{className:"text-white",children:o.length}):"",Object(h.jsx)("button",{onClick:function(){O(C),T(!C)},children:Object(h.jsx)(L.f,{className:"card-icons heart-icon mx-2 ".concat(C&&"icon-filled")})})]}),Object(h.jsxs)("div",{className:"flex",children:[E.length>0?Object(h.jsx)("p",{className:"text-white",children:E.length}):"",Object(h.jsx)("button",{onClick:function(){d({isComments:!0,postId:"".concat(t)})},children:Object(h.jsx)(L.c,{className:"card-icons comment-icon mx-2"})})]}),Object(h.jsx)("div",{className:"flex",children:Object(h.jsx)("button",{onClick:function(){g()},children:Object(h.jsx)(L.b,{className:"card-icons bookmark-icon ml-2"})})})]})]})]})}),D="https://posts-pw2021.herokuapp.com/api/v1",z=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,s,c,a,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.length>1&&void 0!==r[1]?r[1]:0,c=void 0,e.prev=2,e.next=5,x()({method:"GET",baseURL:D,url:"/post/all?limit=10&page=".concat(s),headers:{authorization:"Bearer ".concat(t)}});case 5:(a=e.sent)&&(c=a.data.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:return e.abrupt("return",{isLoading:!1,posts:null!==(n=c)&&void 0!==n?n:[]});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),F=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,s,c,a,r=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=r.length>1&&void 0!==r[1]?r[1]:0,c=void 0,e.prev=2,e.next=5,x()({method:"GET",baseURL:D,url:"/post/owned?limit=3&page=".concat(s),headers:{authorization:"Bearer ".concat(t)}});case 5:(a=e.sent)&&(c=a.data.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log(e.t0);case 12:return e.abrupt("return",{isLoading:!1,posts:null!==(n=c)&&void 0!==n?n:[]});case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),H=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=void 0,e.prev=1,e.next=4,x()({method:"GET",baseURL:D,url:"/post/one/".concat(n),headers:{authorization:"Bearer ".concat(t)}});case 4:(s=e.sent)&&(s=s.data),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.prev=11,e.abrupt("return",s);case 14:case"end":return e.stop()}}),e,null,[[1,8,11,14]])})));return function(t,n){return e.apply(this,arguments)}}(),K=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=void 0,e.prev=1,e.next=4,x()({method:"GET",baseURL:D,url:"/post/fav",headers:{authorization:"Bearer ".concat(t)}});case 4:(c=e.sent)&&(s=c.data.favorites),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log(e.t0);case 11:return e.abrupt("return",null!==(n=s)&&void 0!==n?n:[]);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=Object(l.a)(i.a.mark((function e(t){var n,s,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,K(t);case 2:return n=e.sent,s=n.map((function(e){return H(t,e)})),e.next=6,Promise.all(s);case 6:return c=e.sent,e.abrupt("return",{isLoading:!1,posts:null!==c&&void 0!==c?c:[]});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=void 0,e.prev=1,e.next=4,x()({method:"PATCH",baseURL:D,url:"/post/fav/".concat(n),headers:{authorization:"Bearer ".concat(t)}});case 4:s=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.prev=10,e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=void 0,e.prev=1,e.next=4,x()({method:"PATCH",baseURL:D,url:"/post/like/".concat(n),headers:{authorization:"Bearer ".concat(t)}});case 4:s=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.prev=10,e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t,n){return e.apply(this,arguments)}}(),J=function(){var e=Object(l.a)(i.a.mark((function e(t,n,s){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=void 0,e.prev=1,e.next=4,x()({method:"PATCH",baseURL:D,url:"/post/comment/".concat(n),headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(t)},data:{description:"".concat(s)}});case 4:c=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.prev=10,e.abrupt("return",c);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t,n,s){return e.apply(this,arguments)}}(),Q=function(){var e=Object(l.a)(i.a.mark((function e(t,n,s,c){var a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=void 0,e.prev=1,e.next=4,x()({method:"POST",baseURL:D,url:"/post/create",headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(t)},data:{title:"".concat(n),description:"".concat(s),image:"".concat(c)}});case 4:a=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.prev=10,e.abrupt("return",a);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t,n,s,c){return e.apply(this,arguments)}}(),V=function(){var e=Object(l.a)(i.a.mark((function e(t,n){var s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return s=void 0,e.prev=1,e.next=4,x()({method:"PATCH",baseURL:D,url:"/post/toggle/".concat(n),headers:{authorization:"Bearer ".concat(t)}});case 4:s=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.prev=10,e.abrupt("return",s);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t,n){return e.apply(this,arguments)}}(),X=function(){var e=Object(l.a)(i.a.mark((function e(t,n,s,c,a){var r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,e.prev=1,e.next=4,x()({method:"PUT",baseURL:D,url:"/post/update/".concat(n),headers:{"Content-Type":"application/json",authorization:"Bearer ".concat(t)},data:{title:"".concat(s),description:"".concat(c),image:"".concat(a)}});case 4:r=e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),console.log(e.t0);case 10:return e.prev=10,e.abrupt("return",r);case 13:case"end":return e.stop()}}),e,null,[[1,7,10,13]])})));return function(t,n,s,c,a){return e.apply(this,arguments)}}(),Z=(n(60),n(16)),Y=function(e){var t=e.user,n=e.description;return Object(h.jsxs)("div",{className:"m-4 border border-indigo-900 rounded-3xl",children:[Object(h.jsxs)("div",{className:"flex p-4",children:[Object(h.jsx)(L.j,{className:"user-icon mr-2"}),Object(h.jsx)("p",{className:"text-white",children:t.username})]}),Object(h.jsx)("p",{className:"text-white mx-4 mb-4",children:n})]})},$=function(e){var t=e.comments,n=e.setComments,c=e.posts,a=e.setAlertModal,r=e.cleanAlert,o=w(),d=o.token,b=o.user,x=c.find((function(e){return e._id===t.postId})),p=x.comments.filter((function(e){return e.user||e.description||void 0!==e._id})),m=Object(s.useState)(""),f=Object(u.a)(m,2),O=f[0],v=f[1],g=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(O.length>=8)){e.next=8;break}return e.next=3,J(d,x._id,O);case 3:"OK"===e.sent.statusText&&(x.comments.push({description:O,user:{username:b.username},_id:new Date}),a({isAlert:!0,message:"Has comentado en este post",type:"bg-green-400"}),setTimeout((function(){r()}),5e3)),v(""),e.next=10;break;case 8:a({isAlert:!0,message:"El comentario debe tener al menos 8 caracteres",type:"bg-red-400"}),setTimeout((function(){r()}),5e3);case 10:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"comment-card w-full bg-gray-800 rounded-3xl absolute z-40",children:[Object(h.jsxs)("div",{className:"flex flex-nowrap title-container justify-between",children:[Object(h.jsx)("div",{className:"m-4"}),Object(h.jsx)("p",{className:"text-white font-thin text-3xl m-4 self-center",children:"Comentarios"}),Object(h.jsx)("button",{className:"m-8",onClick:function(){n({isComments:!1,postId:""})},children:Object(h.jsx)(Z.a,{className:"comments-icons"})})]}),0===p.length?Object(h.jsxs)("div",{className:"flex flex-col justify-center items-center comments-container",children:[Object(h.jsx)(L.e,{className:"no-comments-icon"}),Object(h.jsx)("p",{className:"text-white",children:"No hay comentarios."})]}):Object(h.jsx)("div",{className:"flex flex-col comments-container",children:p.map((function(e){return Object(h.jsx)(Y,Object(j.a)({},e),e._id)}))}),Object(h.jsxs)("div",{className:"flex input-container",children:[Object(h.jsx)("input",{className:"comment-input ml-auto my-auto p-4 rounded-3xl",placeholder:"Escribe un mensaje...",type:"text",value:O,onChange:function(e){v(e.target.value)}}),Object(h.jsx)("button",{className:"m-auto",onClick:function(){g()},children:Object(h.jsx)(L.d,{className:"new-comment-icon"})})]})]})},ee=(n(61),function(e){var t=e.edit,n=e.setEdit,c=e.setAlertModal,a=e.cleanAlert,r=e.setLocalData,o=(e.localData,Object(s.useState)(t.postImg)),d=Object(u.a)(o,2),j=d[0],b=d[1],x=Object(s.useState)(t.postTitle),p=Object(u.a)(x,2),m=p[0],f=p[1],O=Object(s.useState)(t.postDesc),v=Object(u.a)(O,2),g=v[0],N=v[1],y=w().token,k=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(g.length>=8&&m.length>=8)){e.next=10;break}return e.next=3,X(y,t.postId,m,g,j);case 3:r({id:t.postId,url:j,title:m,desc:g}),n({isEdit:!1,postId:"",postTitle:"",postDesc:"",postImg:""}),b(""),N(""),f(""),e.next=12;break;case 10:c({isAlert:!0,message:"La descripcion y titulo deben tener al menos 8 caracteres.",type:"bg-red-400"}),setTimeout((function(){a()}),2e3);case 12:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"add-card w-full bg-gray-800 rounded-3xl absolute z-40",children:[Object(h.jsxs)("div",{className:"flex flex-nowrap title-container justify-between",children:[Object(h.jsx)("div",{className:"m-4"}),Object(h.jsx)("p",{className:"text-5xl lg:text-5xl font-extrabold text-gray-300 text-center pb-4 mt-10",children:"Editar Post"}),Object(h.jsx)("button",{className:"m-8",onClick:function(){n({isEdit:!1,postId:"",postTitle:"",postDesc:"",postImg:""}),b(""),N(""),f("")},children:Object(h.jsx)(Z.a,{className:"add-icons"})})]}),Object(h.jsxs)("div",{className:"new-input-container flex flex-col m-8 items-center",children:[Object(h.jsx)("div",{className:"image-verifier ".concat(""!==j?"":"p-2"),children:""!==j?Object(h.jsx)("img",{src:j,className:"add-image",alt:"Esperando imagen"}):""}),Object(h.jsxs)("form",{className:"w-full flex flex-col items-center justify-center",children:[Object(h.jsxs)("div",{className:"my-2 sm:w-1/2",children:[Object(h.jsx)("h1",{className:"input-label my-2 text-white",children:"Ingresa la URL de tu imagen:"}),Object(h.jsx)("input",{className:"input-element w-full px-4 py-2 rounded-3xl",placeholder:"p. ej. www.unsplash.com/",type:"text",value:j,onChange:function(e){b(e.target.value)}})]}),Object(h.jsxs)("div",{className:"my-2 sm:w-1/2",children:[Object(h.jsx)("h1",{className:"input-label my-2 text-white",children:"Ingresa un titulo para tu post:"}),Object(h.jsx)("input",{className:"input-element w-full px-4 py-2 rounded-3xl",placeholder:"p. ej. hoy es un dia soleado...",type:"text",value:m,onChange:function(e){f(e.target.value)}})]}),Object(h.jsxs)("div",{className:"my-2 sm:w-1/2",children:[Object(h.jsx)("h1",{className:"input-label my-2 text-white",children:"Ingresa la descripcion de tu post:"}),Object(h.jsx)("input",{className:"input-element w-full px-4 py-2 rounded-3xl",placeholder:"p. ej. deberia llover mas tarde...",type:"text",value:g,onChange:function(e){N(e.target.value)}})]}),Object(h.jsx)("div",{className:"flex",children:Object(h.jsx)("button",{type:"button",className:"rounded-2xl px-4 py-2 m-8 bg-indigo-900 text-white",onClick:function(){return k()},children:"Editar Post"})})]})]})]})}),te=(n(62),function(e){var t=e.setIsNewPost,n=e.setAlertModal,c=e.cleanAlert,a=e.newPostAdded,r=void 0===a?function(){}:a,o=w().token,d=Object(s.useState)(""),j=Object(u.a)(d,2),b=j[0],x=j[1],p=Object(s.useState)(""),m=Object(u.a)(p,2),f=m[0],O=m[1],v=Object(s.useState)(""),g=Object(u.a)(v,2),N=g[0],y=g[1],k=Object(s.useState)(""),_=Object(u.a)(k,2),C=_[0],T=_[1],S=function(){var e=Object(l.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(f.length>=8&&b.length>=8)){e.next=7;break}return e.next=3,Q(o,b,f,N);case 3:"Created"===e.sent.statusText?(t(!1),x(""),y(""),O(""),r()):(n({isAlert:!0,message:"Error, intentalo de nuevo m\xe1s tarde!",type:"bg-red-400"}),setTimeout((function(){c()}),2e3)),e.next=9;break;case 7:n({isAlert:!0,message:"La descripcion y titulo deben tener al menos 8 caracteres.",type:"bg-red-400"}),setTimeout((function(){c()}),2e3);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(h.jsxs)("div",{className:"add-card w-full bg-gray-800 rounded-3xl absolute z-40",children:[Object(h.jsxs)("div",{className:"flex flex-nowrap title-container justify-between",children:[Object(h.jsx)("div",{className:"m-4"}),Object(h.jsx)("p",{className:"text-5xl lg:text-5xl font-extrabold text-gray-300 text-center pb-4 mt-10",children:"Nuevo Post"}),Object(h.jsx)("button",{className:"m-8",onClick:function(){t(!1)},children:Object(h.jsx)(Z.a,{className:"add-icons"})})]}),Object(h.jsxs)("div",{className:"new-input-container flex flex-col m-8 items-center",children:[Object(h.jsx)("div",{className:"image-verifier ".concat(""!==C?"":"p-2"),children:""!==C?Object(h.jsx)("img",{src:C,className:"add-image",alt:"Esperando imagen"}):""}),Object(h.jsxs)("form",{className:"w-full flex flex-col items-center justify-center",children:[Object(h.jsxs)("div",{className:"my-2 sm:w-1/2",children:[Object(h.jsx)("h1",{className:"input-label my-2 text-white",children:"Ingresa la URL de tu imagen:"}),Object(h.jsx)("input",{className:"input-element w-full px-4 py-2 rounded-3xl",placeholder:"p. ej. www.unsplash.com/",type:"text",value:N,onChange:function(e){y(e.target.value)}})]}),Object(h.jsxs)("div",{className:"my-2 sm:w-1/2",children:[Object(h.jsx)("h1",{className:"input-label my-2 text-white",children:"Ingresa un titulo para tu post:"}),Object(h.jsx)("input",{className:"input-element w-full px-4 py-2 rounded-3xl",placeholder:"p. ej. hoy es un dia soleado...",type:"text",value:b,onChange:function(e){x(e.target.value)}})]}),Object(h.jsxs)("div",{className:"my-2 sm:w-1/2",children:[Object(h.jsx)("h1",{className:"input-label my-2 text-white",children:"Ingresa la descripcion de tu post:"}),Object(h.jsx)("input",{className:"input-element w-full px-4 py-2 rounded-3xl",placeholder:"p. ej. deberia llover mas tarde...",type:"text",value:f,onChange:function(e){O(e.target.value)}})]}),Object(h.jsxs)("div",{className:"flex",children:[Object(h.jsx)("button",{type:"button",onClick:function(){""!==N?T(N):(n({isAlert:!0,message:"Introduce una URL para tu post.",type:"bg-red-400"}),setTimeout((function(){c()}),2e3))},className:"rounded-2xl px-4 py-2 m-8 bg-indigo-900 text-white",children:"Verificar imagen"}),Object(h.jsx)("button",{type:"button",onClick:function(){S()},className:"rounded-2xl px-4 py-2 m-8 bg-indigo-900 text-white",children:"Crear Post"})]})]})]})]})}),ne=(n(63),function(){return Object(h.jsxs)("div",{className:"square flex p-4 flex-col bg-blue-400 rounded-3xl animate-pulse",children:[Object(h.jsx)("div",{className:"bg-indigo-900 ml-4 my-2 w-1/5 h-5"}),Object(h.jsx)("div",{className:"bg-indigo-900 mx-auto my-2 w-11/12 h-52"}),Object(h.jsx)("div",{className:"bg-indigo-900 ml-4 my-2 w-3/5 h-5"}),Object(h.jsx)("div",{className:"bg-indigo-900 ml-4 my-2 w-4/5 h-5"})]})}),se=n(22),ce=function(){var e=w(),t=e.token,n=e.user,c=n.role,a=n.username,r=Object(s.useState)([]),o=Object(u.a)(r,2),d=o[0],b=o[1],x=Object(s.useState)(1),p=Object(u.a)(x,2),m=p[0],f=p[1],O=Object(s.useState)(0),v=Object(u.a)(O,2),g=v[0],N=v[1],y=Object(s.useState)(!1),_=Object(u.a)(y,2),C=_[0],T=_[1],S=Object(s.useState)({isComments:!1,postId:""}),P=Object(u.a)(S,2),I=P[0],A=P[1],U=Object(s.useState)({id:"",url:"",title:"",desc:""}),D=Object(u.a)(U,2),F=D[0],H=D[1],K=Object(s.useState)({isEdit:!1,postId:"",postTitle:"",postDesc:"",postImg:""}),J=Object(u.a)(K,2),Q=J[0],X=J[1],Z=Object(s.useState)({isAlert:!1,message:"",type:""}),Y=Object(u.a)(Z,2),ce=Y[0],ae=Y[1],re=Object(s.useState)(!1),oe=Object(u.a)(re,2),ie=oe[0],le=oe[1],ue=Object(s.useCallback)(Object(l.a)(i.a.mark((function e(){var n,s;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("Obteniendo posts: page",g),T(!0),n=1500,s={},1!==m){e.next=11;break}return e.next=7,z(t,g);case 7:s=e.sent,setTimeout((function(){s.posts=s.posts.filter((function(e){return void 0!==e})),b((function(e){return[].concat(Object(E.a)(e),Object(E.a)(s.posts))})),T(s.isLoading)}),n),e.next=15;break;case 11:return e.next=13,G(t);case 13:s=e.sent,setTimeout((function(){s.posts=s.posts.filter((function(e){return void 0!==e})),b(s.posts),T(s.isLoading)}),n);case 15:case"end":return e.stop()}}),e)}))),[m,g,t]);Object(s.useEffect)((function(){ue()}),[ue]);var de=function(){ae({isAlert:!1,icon:"",message:"",type:""})},je=function(){var e=Object(l.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(t,n);case 2:"OK"===e.sent.statusText&&(ae({isAlert:!0,message:"Has cambiado el estado de este post",type:"bg-green-400"}),setTimeout((function(){de()}),2e3));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),be=function(){var e=Object(l.a)(i.a.mark((function e(s,c){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,q(t,s);case 2:"OK"===e.sent.statusText&&(b((function(e){var t=e.findIndex((function(e){return e._id===s}));if(c){var a=e[t].likes.findIndex((function(e){return e.username===n.username}));e[t].likes.splice(a,1)}else e[t].likes.push({username:n.username});return e})),ae({isAlert:!0,message:c?"Has removido tu like":"Has dado like",type:"bg-green-400"}),setTimeout((function(){de()}),2e3));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xe=function(){var e=Object(l.a)(i.a.mark((function e(n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W(t,n);case 2:"OK"===e.sent.statusText&&(ae({isAlert:!0,message:"Has guardado como favorito",type:"bg-green-400"}),setTimeout((function(){de()}),2e3));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pe=function(e){b([]),m===e&&0===g?ue():(N(0),f(e))};return Object(h.jsxs)("main",{className:"bg-indigo-900 h-screen",children:[Object(h.jsxs)("header",{className:R.a.dCenter,children:[Object(h.jsx)("h1",{className:"text-3xl lg:text-3xl font-extrabold text-gray-300 text-center pb-4 mt-8",children:"Photogenix"}),Object(h.jsx)("div",{className:R.a.userSection,children:Object(h.jsx)(k.b,{to:"/user",children:Object(h.jsx)(L.j,{className:R.a.iconUser})})})]}),Object(h.jsxs)("div",{id:"scrollable",className:R.a.posts,children:[ce.isAlert?Object(h.jsx)("div",{className:"flex py-2 px-8 w-5/6 alert-card rounded-3xl z-50 ".concat(R.a.alertCard," ").concat(ce.type),children:Object(h.jsx)("p",{className:"mx-4 text-white",children:ce.message})}):"",Object(h.jsx)(se.a,{dataLength:d.length,next:function(){return N(g+1)},hasMore:!0,scrollableTarget:"scrollable",children:d.map((function(e){return Object(h.jsx)(B,Object(j.a)(Object(j.a)({},e),{},{setComments:A,localData:F,setEdit:X,addNewLike:function(t){return be(e._id,t)},addNewFav:function(){return xe(e._id)},addStatus:function(){return je(e._id)},role:c,username:a,currentuser:n.username}),e._id)}))}),C?Object(h.jsx)(ne,{}):"",I.isComments?Object(h.jsx)($,{comments:I,posts:d,setComments:A,setAlertModal:ae,cleanAlert:de}):"",Q.isEdit?Object(h.jsx)(ee,{edit:Q,setLocalData:H,setEdit:X,setAlertModal:ae,cleanAlert:de}):"",ie?Object(h.jsx)(te,{setIsNewPost:le,setAlertModal:ae,cleanAlert:de,newPostAdded:function(){pe(1)}}):""]}),Object(h.jsx)(M,{changeTab:function(e){return pe(e)},role:c,setIsNewPost:le})]})},ae="/feed",re=function(){var e;return w().user?Object(h.jsx)(d.a,{replace:!0,to:null!==(e=ae)&&void 0!==e?e:"/"}):Object(h.jsx)("div",{className:"flex flex-col justify-center items-center w-screen h-screen bg-white",children:Object(h.jsxs)("p",{className:"text-lg font-medium text-gray-800 text-center p-8",children:[" ","Redireccionando... No se puede redireccionar"," "]})})},oe=function(e){e.role;var t=e.children;return w().token?t:Object(h.jsx)(d.a,{replace:!0,to:"/login"})},ie=n(18),le=n.n(ie),ue=function(){var e=Object(s.useState)([]),t=Object(u.a)(e,2),n=t[0],c=t[1],a=Object(s.useState)(0),r=Object(u.a)(a,2),o=r[0],d=r[1],b=Object(s.useState)({id:"",url:"",title:"",desc:""}),x=Object(u.a)(b,2),p=x[0],m=x[1],f=w(),O=f.token,v=f.user,g=v.role,N=v.username,y=Object(s.useState)(!0),_=Object(u.a)(y,2),C=_[0],T=_[1],S=Object(s.useState)({isAlert:!1,message:"",type:""}),P=Object(u.a)(S,2),I=P[0],A=P[1],U=Object(s.useState)({isEdit:!1,postId:"",postTitle:"",postDesc:"",postImg:""}),R=Object(u.a)(U,2),M=R[0],D=R[1],z=Object(s.useCallback)(Object(l.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Obteniendo posts: page",o),T(!0),t=1500,n={},e.prev=4,e.next=7,F(O,o);case 7:n=e.sent,setTimeout((function(){c((function(e){return[].concat(Object(E.a)(e),Object(E.a)(n.posts))})),T(n.isLoading)}),t),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0);case 14:case"end":return e.stop()}}),e,null,[[4,11]])}))),[O,o]);Object(s.useEffect)((function(){z()}),[z]);var H=function(){A({isAlert:!1,icon:"",message:"",type:""})},K=function(){var e=Object(l.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,V(O,t);case 2:"OK"===e.sent.statusText&&(c((function(e){var s=e.findIndex((function(e){return e._id===t}));return e[s].active=!n,e})),A({isAlert:!0,message:"Has cambiado el estado de este post",type:"bg-green-400"}),setTimeout((function(){H()}),2e3));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();return Object(h.jsxs)("main",{className:"bg-indigo-900 h-screen",children:[Object(h.jsxs)("header",{className:le.a.dCenter,children:[Object(h.jsx)("h1",{className:"text-3xl lg:text-3xl font-extrabold text-gray-300 text-center pb-4 mt-8",children:"Mis Posts"}),Object(h.jsx)("div",{className:le.a.userSection,children:Object(h.jsx)(k.b,{to:"/feed",children:Object(h.jsx)(L.g,{className:le.a.iconUser})})})]}),Object(h.jsxs)("div",{id:"scrollable",className:le.a.posts,children:[I.isAlert?Object(h.jsx)("div",{className:"flex py-2 px-8 w-5/6 alert-card rounded-3xl z-50 ".concat(le.a.alertCard," ").concat(I.type),children:Object(h.jsx)("p",{className:"mx-4 text-white",children:I.message})}):"",Object(h.jsx)(se.a,{dataLength:n.length,next:function(){return d(o+1)},hasMore:!0,scrollableTarget:"scrollable",children:n.map((function(e){return Object(h.jsx)(B,Object(j.a)(Object(j.a)({localData:p},e),{},{token:O,role:g,username:N,isMyPost:true,setEdit:D,addStatus:function(t){return K(e._id,t)}}),e._id)}))}),M.isEdit?Object(h.jsx)(ee,{edit:M,setEdit:D,setAlertModal:A,localData:p,cleanAlert:H,setLocalData:m}):"",C?Object(h.jsx)(ne,{}):""]})]})};r.a.render(Object(h.jsx)(g,{children:Object(h.jsx)(k.a,{children:Object(h.jsxs)(d.d,{children:[Object(h.jsx)(d.b,{path:"/",element:Object(h.jsx)(y,{})}),Object(h.jsx)(d.b,{path:"/login",element:Object(h.jsx)(y,{})}),Object(h.jsx)(d.b,{path:"/feed",element:Object(h.jsxs)(oe,{role:"",children:[" ",Object(h.jsx)(ce,{})," "]})}),Object(h.jsx)(d.b,{path:"/user",element:Object(h.jsxs)(oe,{role:"",children:[" ",Object(h.jsx)(S,{})," "]})}),Object(h.jsx)(d.b,{path:"/myposts",element:Object(h.jsxs)(oe,{role:"",children:[" ",Object(h.jsx)(ue,{})," "]})}),Object(h.jsx)(d.b,{path:"/redirect",element:Object(h.jsx)(re,{})}),Object(h.jsx)(d.b,{path:"test",element:Object(h.jsx)(P,{})}),Object(h.jsx)(d.b,{path:"*",element:Object(h.jsx)(A,{})})]})})}),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.953bb2fa.chunk.js.map